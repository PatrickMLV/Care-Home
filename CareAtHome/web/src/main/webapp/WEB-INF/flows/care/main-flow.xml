<?xml version="1.0" encoding="UTF-8"?>

<flow xmlns="http://www.springframework.org/schema/webflow"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/webflow
    http://www.springframework.org/schema/webflow/spring-webflow-2.0.xsd">

	<view-state id="login" view="login/login.xhtml">
		<transition on="authentification" to="authentification" />
	</view-state>

	<action-state id="authentification">
		<evaluate expression="loginBean.authentificate()" />
		<transition on="success" to="main" >
			<evaluate expression="0" result="flowScope.window" />
		</transition>
		<transition on="error" to="login" />
	</action-state>

	<view-state id="main" view="basic/main.xhtml">
		<transition on="logout" to="login" />
		
		<!-- MENU -->
		<transition on="goToConsultPatient" to="main" >
			<evaluate expression="1" result="flowScope.window" />
		</transition>
		<transition on="goToConsultStaff" to="main" >
			<evaluate expression="2" result="flowScope.window" />
		</transition>
		<transition on="goToCircuitStaff" to="main" >
			<evaluate expression="3" result="flowScope.window" />
		</transition>
		<transition on="goToDayOffStaff" to="main" >
			<evaluate expression="4" result="flowScope.window" />
		</transition>
		<transition on="goToManagePatient" to="main" >
			<evaluate expression="5" result="flowScope.window" />
		</transition>
		<transition on="goToManageStaff" to="main" >
			<evaluate expression="6" result="flowScope.window" />
		</transition>
		<transition on="goToEvaluation" to="main" >
			<evaluate expression="7" result="flowScope.window" />
		</transition>
	</view-state>

</flow>